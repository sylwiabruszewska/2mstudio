"use strict";(self.webpackChunk_2mstudio=self.webpackChunk_2mstudio||[]).push([[285],{7285:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var s=t(4270),r=t(2791),o=t(7689),c=t(1087),n=t(1933);const i="BlogPage_blog-list__FhnfV",l="BlogPage_blog-post__4Rp8X",d="BlogPage_blog-card__Yx2Dp",p="BlogPage_box__+pPxV",g="BlogPage_post-img__C6DEb",h="BlogPage_blog-date__WTLjp",w="BlogPage_blog-title__k+MSP",m="BlogPage_overlay__QkxZR",u="BlogPage_btn-group__0U9TC",_="BlogPage_btn-pag__4ry92";var x=t(7527),j=t(8810),y=t(184);const f=()=>{const[e,a]=(0,r.useState)(1),t=(0,o.TH)();(0,r.useEffect)((()=>{const e=new URLSearchParams(t.search),s=parseInt(e.get("page")||"1");a(s)}),[t]);const{data:f,isLoading:P,isError:b}=(0,n.useQuery)(["blogPosts",e],(()=>(0,j.u3)(e))),v=null===f||void 0===f?void 0:f.posts,N=null===f||void 0===f?void 0:f.lastPage;if(P)return(0,y.jsx)(x.aN,{});if(b)return(0,y.jsx)("p",{children:"Wyst\u0105pi\u0142 b\u0142\u0105d, spr\xf3buj od\u015bwie\u017cy\u0107 stron\u0119."});const k=e=>{const a=new URLSearchParams(t.search);a.set("page",e);const s="".concat("/2mstudio").concat(t.pathname,"?").concat(a.toString());window.history.pushState({},"",s)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.q,{children:(0,y.jsx)("title",{children:"2M STUDIO Pracownia Projektowa - Portfolio - Blog"})}),(0,y.jsx)(x.$0,{children:(0,y.jsxs)(x.W2,{children:[(0,y.jsx)("div",{className:i,children:v&&v.map((e=>(0,y.jsxs)("article",{className:d,children:[(0,y.jsx)("div",{className:l,children:(0,y.jsxs)(c.rU,{to:"/".concat(e.id),children:[(0,y.jsx)("p",{className:h,children:new Date(e.date).toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"})}),(0,y.jsx)("h2",{className:w,children:e.title}),(0,y.jsx)("p",{className:"blog-excerpt",dangerouslySetInnerHTML:{__html:e.excerpt}})]})}),(0,y.jsx)("div",{className:m,children:(0,y.jsx)(c.rU,{to:"/".concat(e.id),children:(0,y.jsxs)("div",{children:[(0,y.jsx)("img",{src:e.img,alt:e.title,className:g}),(0,y.jsx)("div",{className:p,children:"zobacz post"})]})})})]},e.id)))}),(0,y.jsxs)("div",{className:u,children:[(0,y.jsx)("div",{children:v&&e>1&&(0,y.jsx)(x.zx,{className:_,onClick:()=>{const t=e-1;a(t),k(t)},children:"Poprzednia strona"})}),(0,y.jsx)("div",{children:e<N&&v&&(0,y.jsx)(x.zx,{className:_,onClick:()=>{const t=e+1;a(t),k(t)},children:"Nast\u0119pna strona"})})]})]})})]})}},8810:(e,a,t)=>{t.d(a,{$h:()=>b,u3:()=>f,Q3:()=>_,_z:()=>y,VR:()=>j,HL:()=>x,xl:()=>P});var s=t(5294);const r="https://www.2mstudio.org.pl/wordpress/wp-json/wp/v2/",o="posts",c="posts?categories=5",n="posts?categories=16",i="posts?categories=17",l="posts?categories=18",d="posts?categories=19",p="media/",g="pages/112";var h=t(9253);const w=s.Z.create({baseURL:r,headers:{"Content-Type":"application/json"}}),m=async e=>{try{const a=await w.get("".concat(r).concat(e),{headers:{accept:"application/json"}});if(200===a.status)return a.data;throw new Error("Network response was not ok")}catch(a){throw console.error("An error occurred while fetching data:",a),a}},u=async e=>{const a=await m(e);return await Promise.all(a.map((async e=>{let a={id:e.id,img:h,title:e.title.rendered};if(e.featured_media)try{const t=await v(e.featured_media);a.img=t.source_url||h}catch(t){console.error("There was a problem fetching images for project:",t)}return a})))},_=async()=>await u(n),x=async()=>await u(i),j=async()=>await u(l),y=async()=>await u(d),f=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;const t="".concat(c,"&page=").concat(e,"&per_page=").concat(a),s=await w.get(t,{headers:{accept:"application/json"}});if(200===s.status){const e=s.headers["x-wp-total"],t=s.data,r=Math.ceil(parseInt(e)/a);return{posts:await Promise.all(t.map((async e=>{let a={id:e.id,img:h,title:e.title.rendered,date:e.date,excerpt:e.excerpt.rendered};if(e.featured_media)try{const t=await v(e.featured_media);a.img=t.source_url||h}catch(t){console.error("There was a problem fetching images for posts:",t)}return a}))),lastPage:r}}throw new Error("Network response was not ok")},P=async e=>await m("".concat(o,"/").concat(e)),b=async()=>{const e=await m(g);if(e&&e.content&&e.content.rendered)return e.content.rendered;throw new Error("Nie mo\u017cna pobra\u0107 zawarto\u015bci strony O nas.")},v=async e=>{try{const a=await w.get("".concat(p).concat(e));if(200!==a.status)throw new Error("Network response was not ok");return a.data}catch(a){throw console.error("There was a problem fetching the media:",a),a}}},9253:(e,a,t)=>{e.exports=t.p+"static/media/photo-home.b28ed9eea3b77cd2ca9c.jpg"}}]);
//# sourceMappingURL=285.2c6c622d.chunk.js.map