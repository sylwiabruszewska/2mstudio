"use strict";(self.webpackChunk_2mstudio=self.webpackChunk_2mstudio||[]).push([[886],{2886:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var r=a(1591),s=a(5043),o=a(3216),n=a(5475),c=a(2907);const i="BlogPage_blog-list__FhnfV",l="BlogPage_blog-post__4Rp8X",d="BlogPage_blog-card__Yx2Dp",p="BlogPage_box__+pPxV",h="BlogPage_post-img__C6DEb",g="BlogPage_blog-date__WTLjp",w="BlogPage_blog-title__k+MSP",m="BlogPage_overlay__QkxZR",u="BlogPage_btn-group__0U9TC",_="BlogPage_btn-pag__4ry92";var f=a(8201),x=a(8819),j=a(579);const y=()=>{const[e,t]=(0,s.useState)(1),a=(0,o.zy)();(0,s.useEffect)((()=>{const e=new URLSearchParams(a.search),r=parseInt(e.get("page")||"1");t(r)}),[a]);const{data:y,isLoading:b,isError:P}=(0,c.useQuery)(["blogPosts",e],(()=>(0,x.g6)(e))),v=null===y||void 0===y?void 0:y.posts,N=null===y||void 0===y?void 0:y.lastPage;if(b)return(0,j.jsx)(f.aH,{});if(P)return(0,j.jsx)("p",{children:"Wyst\u0105pi\u0142 b\u0142\u0105d, spr\xf3buj od\u015bwie\u017cy\u0107 stron\u0119."});const k=e=>{const t=new URLSearchParams(a.search);t.set("page",e);const r=`/2mstudio${a.pathname}?${t.toString()}`;window.history.pushState({},"",r)},$=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.m,{children:(0,j.jsx)("title",{children:"2M STUDIO Pracownia Projektowa - Portfolio - Blog"})}),(0,j.jsx)(f.wn,{children:(0,j.jsxs)(f.mc,{children:[(0,j.jsx)("div",{className:i,children:v&&v.map((e=>(0,j.jsxs)("article",{className:d,children:[(0,j.jsx)("div",{className:l,children:(0,j.jsxs)(n.N_,{to:`/${e.id}`,children:[(0,j.jsx)("p",{className:g,children:new Date(e.date).toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"})}),(0,j.jsx)("h2",{className:w,children:e.title}),(0,j.jsx)("p",{className:"blog-excerpt",dangerouslySetInnerHTML:{__html:e.excerpt}})]})}),(0,j.jsx)("div",{className:m,children:(0,j.jsx)(n.N_,{to:`/${e.id}`,children:(0,j.jsxs)("div",{children:[(0,j.jsx)("img",{src:e.img,alt:e.title,className:h,loading:"lazy"}),(0,j.jsx)("div",{className:p,children:"zobacz post"})]})})})]},e.id)))}),(0,j.jsxs)("div",{className:u,children:[(0,j.jsx)("div",{children:v&&e>1&&(0,j.jsx)(f.$n,{className:_,onClick:a=>{a.preventDefault();const r=e-1;t(r),k(r)},children:"Poprzednia strona"})}),(0,j.jsx)("div",{children:e<N&&v&&(0,j.jsx)(f.$n,{className:_,onClick:()=>{const a=e+1;t(a),$(),k(a)},children:"Nast\u0119pna strona"})})]})]})})]})}},8819:(e,t,a)=>{a.d(t,{Uz:()=>N,g6:()=>P,rq:()=>k,t_:()=>x,kU:()=>b,xB:()=>y,gw:()=>j,f5:()=>v,h6:()=>$});var r=a(6213);const s="https://www.2mstudio.org.pl/wordpress/wp-json/wp/v2/",o="posts",n="posts?categories=5",c="posts?categories=16",i="posts?categories=17",l="posts?categories=18",d="posts?categories=19",p="media/",h="pages/112",g="pages/342",w="pages/3";var m=a(8055);const u=r.A.create({baseURL:s,headers:{"Content-Type":"application/json"}}),_=async e=>{try{const t=await u.get(`${s}${e}`,{headers:{accept:"application/json"}});if(200===t.status)return t.data;throw new Error("Network response was not ok")}catch(t){throw console.error("An error occurred while fetching data:",t),t}},f=async e=>{const t=await _(e);return await Promise.all(t.map((async e=>{let t={id:e.id,img:m,title:e.title.rendered};if(e.featured_media)try{const a=await B(e.featured_media);t.img=a.source_url||m}catch(a){console.error("There was a problem fetching images for project:",a)}return t})))},x=async()=>await f(c),j=async()=>await f(i),y=async()=>await f(l),b=async()=>await f(d),P=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;const a=`${n}&page=${e}&per_page=${t}`,r=await u.get(a,{headers:{accept:"application/json"}});if(200===r.status){const e=r.headers["x-wp-total"],a=r.data,s=Math.ceil(parseInt(e)/t);return{posts:await Promise.all(a.map((async e=>{let t={id:e.id,img:m,title:e.title.rendered,date:e.date,excerpt:e.excerpt.rendered};if(e.featured_media)try{const a=await B(e.featured_media);t.img=a.source_url||m}catch(a){console.error("There was a problem fetching images for posts:",a)}return t}))),lastPage:s}}throw new Error("Network response was not ok")},v=async e=>await _(`${o}/${e}`),N=async()=>{const e=await _(h);if(e&&e.content&&e.content.rendered)return e.content.rendered;throw new Error("There was a problem fetching the data.")},k=async()=>{const e=await _(g);if(e&&e.content&&e.content.rendered)return e.content.rendered;throw new Error("There was a problem fetching the data.")},$=async()=>{const e=await _(w);if(e&&e.content&&e.content.rendered)return e.content.rendered;throw new Error("There was a problem fetching the data.")},B=async e=>{try{const t=await u.get(`${p}${e}`);if(200!==t.status)throw new Error("Network response was not ok");return t.data}catch(t){throw console.error("There was a problem fetching the media:",t),t}}},8055:(e,t,a)=>{e.exports=a.p+"static/media/photo-home-medium.663b7a1c7f4d5d6fd937.webp"}}]);
//# sourceMappingURL=886.f5b4640d.chunk.js.map